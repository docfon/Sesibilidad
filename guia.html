<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hipersensibilidad Dentinal: Gu√≠a Interactiva</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- FontAwesome (for icons, replacing SVG) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chosen Palette: "Medical Calm" - White, Slate-50, Teal-600, Sky-700, Amber-400 (for warnings/pain). -->
    
    <!-- Application Structure Plan: 
         The app is designed as a vertical "Clinical Dashboard" for dentists and students.
         1. Hero Section: Defines the condition clearly.
         2. Etiology & Prevalence: Uses a Pie Chart to visualize the breakdown of causes, making abstract risk factors concrete.
         3. Diagnostic Hub: Centralizes testing methods into interactive tabs to declutter the interface. Includes a functional VAS (Visual Analog Scale) simulator to demonstrate how subjective pain is measured.
         4. Treatment Efficacy: Uses a Line Chart to compare the speed of relief between Home Care (slow) and Office Treatment (fast), helping visualize patient expectations.
         5. Protocol Pyramid: A step-by-step text guide for management.
         Rationale: This structure moves logically from "What is it?" to "How do I find it?" to "How do I fix it?", mirroring the clinical workflow.
    -->

    <!-- Visualization & Content Choices:
         1. Prevalence of Causes -> Goal: Inform -> Method: Donut Chart -> Interaction: Hover for stats -> Justification: Shows the multifactorial nature of the disease clearly.
         2. Pain Measurement (VAS) -> Goal: Inform/Interact -> Method: HTML Range Slider + Dynamic JS Text -> Interaction: Sliding changes the emoji and descriptor -> Justification: Demonstrates the subjectivity of pain assessment without static images.
         3. Treatment Efficacy Time-Course -> Goal: Compare -> Method: Line Chart -> Interaction: Toggle datasets (simulated data) -> Justification: Crucial for understanding that home treatments take time (cumulative effect) vs immediate office relief.
         4. Diagnostic Tools -> Goal: Organize -> Method: Tabbed Cards -> Interaction: Click to reveal details -> Justification: Compares different testing mechanisms (tactile vs thermal) cleanly.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        /* Custom Chart Container Styles for Responsiveness */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Custom Range Slider Styling */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #0ea5e9;
            cursor: pointer;
            margin-top: -8px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            background: #cbd5e1;
            border-radius: 4px;
        }
        input[type=range]:focus {
            outline: none;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans leading-relaxed">

    <!-- Navigation / Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center gap-3 mb-2 md:mb-0">
                <i class="fa-solid fa-tooth text-teal-600 text-2xl"></i>
                <h1 class="text-xl font-bold text-slate-800 tracking-tight">DentalSens<span class="text-teal-600">RWE</span>.Pro</h1>
            </div>
            <nav class="flex gap-4 text-sm font-medium text-slate-600">
                <a href="#definition" class="hover:text-teal-600 transition-colors">Definici√≥n</a>
                <a href="#etiology" class="hover:text-teal-600 transition-colors">Causas</a>
                <a href="#diagnosis" class="hover:text-teal-600 transition-colors">Diagn√≥stico</a>
                <a href="#treatment" class="hover:text-teal-600 transition-colors">Tratamiento</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 space-y-16">

        <!-- Section 1: Definition (The Clinical Problem) -->
        <section id="definition" class="max-w-4xl mx-auto text-center">
            <h2 class="text-3xl font-bold text-slate-900 mb-4">Hipersensibilidad Dentinal</h2>
            <p class="text-lg text-slate-600 mb-8 max-w-2xl mx-auto">
                Una condici√≥n cl√≠nica caracterizada por <strong>dolor corto y agudo</strong> que surge de la dentina expuesta en respuesta a est√≠mulos t√©rmicos, evaporativos, t√°ctiles, osm√≥ticos o qu√≠micos, y que no puede atribuirse a ninguna otra forma de patolog√≠a dental.
            </p>
            
            <div class="grid md:grid-cols-3 gap-6 text-left">
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-teal-500">
                    <div class="flex items-center gap-3 mb-3">
                        <i class="fa-solid fa-wind text-teal-600 text-xl"></i>
                        <h3 class="font-bold text-slate-800">Teor√≠a Hidrodin√°mica</h3>
                    </div>
                    <p class="text-sm text-slate-500">
                        Propuesta por Br√§nnstr√∂m. El movimiento de fluidos dentro de los t√∫bulos dentinarios estimula las terminaciones nerviosas pulpares, provocando dolor.
                    </p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-sky-500">
                    <div class="flex items-center gap-3 mb-3">
                        <i class="fa-solid fa-shield-halved text-sky-600 text-xl"></i>
                        <h3 class="font-bold text-slate-800">P√©rdida de Esmalte</h3>
                    </div>
                    <p class="text-sm text-slate-500">
                        La dentina queda expuesta cuando el esmalte protector se desgasta por erosi√≥n √°cida, abrasi√≥n mec√°nica o atrici√≥n.
                    </p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-amber-500">
                    <div class="flex items-center gap-3 mb-3">
                        <i class="fa-solid fa-arrow-down text-amber-600 text-xl"></i>
                        <h3 class="font-bold text-slate-800">Recesi√≥n Gingival</h3>
                    </div>
                    <p class="text-sm text-slate-500">
                        El desplazamiento del margen gingival expone el cemento radicular y la dentina subyacente, una causa primaria muy com√∫n.
                    </p>
                </div>
            </div>
        </section>

        <!-- Section 2: Etiology & Data (Chart) -->
        <section id="etiology" class="bg-slate-100 rounded-2xl p-6 md:p-10">
            <div class="grid md:grid-cols-2 gap-10 items-center">
                <div>
                    <h3 class="text-2xl font-bold text-slate-800 mb-3">Factores Etiol√≥gicos Predominantes</h3>
                    <p class="text-slate-600 mb-6">
                        Comprender la causa ra√≠z es vital para el tratamiento. Los estudios cl√≠nicos indican que la recesi√≥n gingival y la erosi√≥n √°cida son los factores contribuyentes m√°s frecuentes. Analice la distribuci√≥n de causas basada en literatura reciente:
                    </p>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3">
                            <span class="w-2 h-2 mt-2 bg-teal-500 rounded-full flex-shrink-0"></span>
                            <span class="text-sm text-slate-700"><strong>Recesi√≥n Gingival:</strong> Frecuente en pacientes con enfermedad periodontal o cepillado traum√°tico.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="w-2 h-2 mt-2 bg-sky-500 rounded-full flex-shrink-0"></span>
                            <span class="text-sm text-slate-700"><strong>Erosi√≥n √Åcida:</strong> Dietas √°cidas, reflujo g√°strico o bulimia.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="w-2 h-2 mt-2 bg-amber-400 rounded-full flex-shrink-0"></span>
                            <span class="text-sm text-slate-700"><strong>Abrasi√≥n/Atrici√≥n:</strong> Bruxismo y t√©cnicas de higiene inadecuadas.</span>
                        </li>
                    </ul>
                </div>
                
                <!-- Chart Container Rule: w-full, max-w, centered -->
                <div class="bg-white p-4 rounded-xl shadow-md w-full flex flex-col items-center">
                    <h4 class="text-sm font-bold text-slate-400 mb-4 uppercase tracking-wider text-center">Distribuci√≥n de Factores Causales</h4>
                    <div class="chart-container">
                        <canvas id="etiologyChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Diagnosis & Measurement (Interactive Tools) -->
        <section id="diagnosis">
            <div class="max-w-4xl mx-auto mb-10">
                <h2 class="text-3xl font-bold text-slate-900 mb-4 text-center">Protocolo de Diagn√≥stico</h2>
                <p class="text-slate-600 text-center max-w-2xl mx-auto">
                    El diagn√≥stico requiere reproducir los s√≠ntomas para confirmar la dentina expuesta. Utilice estas herramientas interactivas para explorar los m√©todos est√°ndar y las escalas de dolor.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Interactive Tabs for Methods -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden h-full flex flex-col">
                    <div class="bg-slate-50 border-b border-slate-200 p-4 flex gap-4 overflow-x-auto">
                        <button onclick="showTab('thermal')" id="btn-thermal" class="tab-btn px-4 py-2 rounded-lg bg-teal-600 text-white text-sm font-semibold transition-all">Pruebas T√©rmicas</button>
                        <button onclick="showTab('tactile')" id="btn-tactile" class="tab-btn px-4 py-2 rounded-lg bg-slate-200 text-slate-600 text-sm font-semibold transition-all hover:bg-slate-300">Pruebas T√°ctiles</button>
                        <button onclick="showTab('differential')" id="btn-differential" class="tab-btn px-4 py-2 rounded-lg bg-slate-200 text-slate-600 text-sm font-semibold transition-all hover:bg-slate-300">Diagn√≥stico Diferencial</button>
                    </div>
                    
                    <div class="p-6 flex-grow relative">
                        <!-- Content: Thermal -->
                        <div id="content-thermal" class="tab-content transition-opacity duration-300">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center text-teal-600">
                                    <i class="fa-solid fa-snowflake"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800">Est√≠mulo Evaporativo (Chorro de Aire)</h3>
                            </div>
                            <p class="text-slate-600 mb-4 text-sm">
                                Se considera el "est√°ndar de oro" cl√≠nico. Consiste en aplicar un chorro de aire de la jeringa triple durante 1 segundo, a una distancia de 1 cm del diente, perpendicular a la superficie radicular expuesta.
                            </p>
                            <div class="bg-teal-50 p-4 rounded-lg border-l-4 border-teal-500">
                                <h4 class="font-bold text-teal-800 text-sm mb-1">Escala de Schiff (Respuesta)</h4>
                                <ul class="text-xs text-teal-700 space-y-1">
                                    <li>0: Sin respuesta</li>
                                    <li>1: Respuesta leve, sin solicitud de detener</li>
                                    <li>2: Respuesta dolorosa, solicita detener</li>
                                    <li>3: Respuesta dolorosa intensa, movimiento del paciente</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Content: Tactile -->
                        <div id="content-tactile" class="tab-content hidden transition-opacity duration-300">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 rounded-full bg-sky-100 flex items-center justify-center text-sky-600">
                                    <i class="fa-solid fa-fingerprint"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800">Sonda Yeaple / Explorador</h3>
                            </div>
                            <p class="text-slate-600 mb-4 text-sm">
                                Uso de un explorador dental afilado o una sonda electr√≥nica de fuerza controlada (Sonda Yeaple). Se pasa la punta suavemente a trav√©s del √°rea cervical del diente (l√≠nea amelocementaria).
                            </p>
                            <p class="text-sm text-slate-500">
                                Esto ayuda a localizar el punto exacto de sensibilidad y descarta caries cervicales o defectos estructurales profundos.
                            </p>
                        </div>

                        <!-- Content: Differential -->
                        <div id="content-differential" class="tab-content hidden transition-opacity duration-300">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center text-amber-600">
                                    <i class="fa-solid fa-list-check"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800">Descartar otras patolog√≠as</h3>
                            </div>
                            <p class="text-slate-600 mb-2 text-sm">
                                La hipersensibilidad es un diagn√≥stico de exclusi√≥n. Antes de tratar, verifique que NO sea:
                            </p>
                            <ul class="space-y-2 text-sm text-slate-600">
                                <li class="flex items-center gap-2"><i class="fa-solid fa-xmark text-red-400"></i> Caries dental</li>
                                <li class="flex items-center gap-2"><i class="fa-solid fa-xmark text-red-400"></i> S√≠ndrome del diente agrietado</li>
                                <li class="flex items-center gap-2"><i class="fa-solid fa-xmark text-red-400"></i> Restauraciones defectuosas/filtradas</li>
                                <li class="flex items-center gap-2"><i class="fa-solid fa-xmark text-red-400"></i> Pulpitis irreversible</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Interactive VAS Scale Simulator -->
                <div class="bg-slate-800 text-white rounded-xl shadow-lg p-6 flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-ruler-horizontal text-teal-400"></i> Escala Visual Anal√≥gica (EVA)
                    </h3>
                    <p class="text-slate-400 text-sm mb-8">
                        Simulador: Mueva el deslizador para ver c√≥mo los pacientes describen el dolor y c√≥mo se registra cl√≠nicamente.
                    </p>

                    <div class="mb-8 text-center">
                        <div id="vas-emoji" class="text-6xl mb-4 transition-transform duration-200">üòê</div>
                        <div id="vas-score" class="text-4xl font-bold text-teal-400">0</div>
                        <div id="vas-desc" class="text-lg font-medium text-slate-300 mt-2">Sin dolor</div>
                    </div>

                    <div class="relative w-full px-2">
                        <input type="range" id="vas-slider" min="0" max="10" value="0" step="1" class="w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-slate-500 mt-2">
                            <span>0 (Nada)</span>
                            <span>5 (Moderado)</span>
                            <span>10 (Peor imaginable)</span>
                        </div>
                    </div>
                    
                    <div class="mt-6 bg-slate-700/50 p-3 rounded text-xs text-slate-400 border border-slate-600">
                        <i class="fa-solid fa-circle-info mr-1"></i>
                        Nota cl√≠nica: Un cambio de ‚â•2 puntos en la EVA se considera cl√≠nicamente significativo despu√©s del tratamiento.
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Treatment & Research (Line Chart) -->
        <section id="treatment" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 md:p-10">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-slate-900 mb-4">Estrategias de Tratamiento y Eficacia</h2>
                <p class="text-slate-600 max-w-3xl">
                    El manejo de la hipersensibilidad sigue una "Escalera Terap√©utica". La siguiente gr√°fica compara la reducci√≥n del dolor a lo largo del tiempo utilizando dos enfoques comunes: dent√≠fricos desensibilizantes (uso en casa) vs. barnices de fl√∫or/glutaraldeh√≠do (cl√≠nica).
                </p>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Chart Col -->
                <div class="lg:col-span-2">
                    <div class="bg-slate-50 p-4 rounded-xl border border-slate-100">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-bold text-slate-700 text-sm">Reducci√≥n del Dolor (EVA) a lo largo del tiempo</h4>
                            <div class="flex gap-2 text-xs">
                                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-teal-500"></span> Cl√≠nica (Inmediato)</span>
                                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-sky-500"></span> Casa (Acumulativo)</span>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="treatmentChart"></canvas>
                        </div>
                    </div>
                    <p class="text-xs text-slate-400 mt-2 italic">
                        *Datos simulados basados en tendencias de meta-an√°lisis recientes. El tratamiento en cl√≠nica ofrece alivio r√°pido pero puede requerir mantenimiento. El tratamiento en casa requiere constancia (2-4 semanas).
                    </p>
                </div>

                <!-- Info Accordion Col -->
                <div class="space-y-4">
                    <h3 class="font-bold text-slate-800 border-b pb-2">Opciones Terap√©uticas</h3>
                    
                    <!-- Option 1 -->
                    <div class="group border border-slate-200 rounded-lg p-4 hover:border-teal-500 transition-colors cursor-pointer" onclick="highlightTreatment('home')">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-bold text-teal-700">1. Cuidado en Casa (Primera L√≠nea)</h4>
                            <i class="fa-solid fa-house-medical text-teal-500"></i>
                        </div>
                        <p class="text-sm text-slate-600 leading-snug">
                            <strong>Mecanismo:</strong> Despolarizaci√≥n nerviosa (Nitrato de potasio) o Oclusi√≥n tubular (Fluoruro de esta√±o, Arginina).
                        </p>
                        <p class="text-xs text-slate-400 mt-2">Uso: 2 veces al d√≠a por m√≠n. 2 semanas.</p>
                    </div>

                    <!-- Option 2 -->
                    <div class="group border border-slate-200 rounded-lg p-4 hover:border-sky-500 transition-colors cursor-pointer" onclick="highlightTreatment('office')">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-bold text-sky-700">2. Intervenci√≥n Cl√≠nica</h4>
                            <i class="fa-solid fa-user-doctor text-sky-500"></i>
                        </div>
                        <p class="text-sm text-slate-600 leading-snug">
                            <strong>Mecanismo:</strong> Sellado f√≠sico inmediato de t√∫bulos.
                        </p>
                        <p class="text-xs text-slate-500 mt-1 list-disc pl-4">
                            ‚Ä¢ Barnices de Fl√∫or (5% NaF)<br>
                            ‚Ä¢ Glutaraldeh√≠do/HEMA (Gluma)<br>
                            ‚Ä¢ Oxalatos
                        </p>
                    </div>

                    <!-- Option 3 -->
                    <div class="group border border-slate-200 rounded-lg p-4 hover:border-amber-500 transition-colors cursor-pointer">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-bold text-amber-700">3. Tratamientos Avanzados</h4>
                            <i class="fa-solid fa-microchip text-amber-500"></i>
                        </div>
                        <p class="text-sm text-slate-600 leading-snug">
                            <strong>Tecnolog√≠as:</strong> L√°seres (Nd:YAG, Diodo) para coagulaci√≥n proteica o injertos de tejido conectivo para cubrir recesiones.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Synthesis / Checklist -->
        <section class="bg-teal-900 text-white rounded-2xl p-8 md:p-12 text-center">
            <h2 class="text-2xl font-bold mb-6">Resumen del Plan de Acci√≥n</h2>
            <div class="grid md:grid-cols-3 gap-6 text-left">
                <div class="bg-teal-800 p-6 rounded-lg">
                    <div class="text-teal-300 font-bold mb-2">01. PREVENIR</div>
                    <ul class="text-sm space-y-2 text-teal-50">
                        <li>‚Ä¢ Corregir t√©cnica de cepillado (suave).</li>
                        <li>‚Ä¢ Controlar dieta √°cida.</li>
                        <li>‚Ä¢ Tratar bruxismo.</li>
                    </ul>
                </div>
                <div class="bg-teal-800 p-6 rounded-lg">
                    <div class="text-teal-300 font-bold mb-2">02. DIAGNOSTICAR</div>
                    <ul class="text-sm space-y-2 text-teal-50">
                        <li>‚Ä¢ Usar aire y explorador.</li>
                        <li>‚Ä¢ Cuantificar dolor (EVA).</li>
                        <li>‚Ä¢ Descartar caries/fracturas.</li>
                    </ul>
                </div>
                <div class="bg-teal-800 p-6 rounded-lg">
                    <div class="text-teal-300 font-bold mb-2">03. TRATAR</div>
                    <ul class="text-sm space-y-2 text-teal-50">
                        <li>‚Ä¢ Inicio: Pasta desensibilizante.</li>
                        <li>‚Ä¢ Persistente: Barniz/Adhesivo.</li>
                        <li>‚Ä¢ Severo: L√°ser/Restauraci√≥n.</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm mb-2">Generado basado en plan de investigaci√≥n cl√≠nica odontol√≥gica.</p>
            <p class="text-xs">&copy; 2023 Dashboard Cl√≠nico Dental. Herramienta educativa simulada.</p>
        </div>
    </footer>

    <!-- Logic Script -->
    <script>
        // State Management
        const state = {
            currentTab: 'thermal',
            vasValue: 0
        };

        // --- 1. Navigation / Tabs Logic ---
        function showTab(tabId) {
            // Update State
            state.currentTab = tabId;

            // Hide all contents
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Reset buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-teal-600', 'text-white');
                btn.classList.add('bg-slate-200', 'text-slate-600');
            });

            // Show active content
            document.getElementById(`content-${tabId}`).classList.remove('hidden');
            
            // Highlight active button
            const activeBtn = document.getElementById(`btn-${tabId}`);
            activeBtn.classList.remove('bg-slate-200', 'text-slate-600');
            activeBtn.classList.add('bg-teal-600', 'text-white');
        }

        // --- 2. VAS Simulator Logic ---
        const vasSlider = document.getElementById('vas-slider');
        const vasScore = document.getElementById('vas-score');
        const vasDesc = document.getElementById('vas-desc');
        const vasEmoji = document.getElementById('vas-emoji');

        const vasData = [
            { label: "Sin dolor", emoji: "üòê" },
            { label: "Molestia leve", emoji: "üôÇ" },
            { label: "Molestia leve", emoji: "üòü" },
            { label: "Dolor leve", emoji: "üòü" },
            { label: "Dolor moderado", emoji: "üò£" },
            { label: "Dolor moderado", emoji: "üò£" },
            { label: "Dolor intenso", emoji: "üò´" },
            { label: "Dolor intenso", emoji: "üò´" },
            { label: "Muy intenso", emoji: "üò≠" },
            { label: "Insupportable", emoji: "üò±" },
            { label: "Peor imaginable", emoji: "üíÄ" }
        ];

        vasSlider.addEventListener('input', (e) => {
            const val = parseInt(e.target.value);
            state.vasValue = val;
            
            vasScore.textContent = val;
            vasDesc.textContent = vasData[val].label;
            vasEmoji.textContent = vasData[val].emoji;

            // Simple visual feedback on text color based on severity
            if (val < 3) vasScore.className = "text-4xl font-bold text-teal-400";
            else if (val < 7) vasScore.className = "text-4xl font-bold text-yellow-400";
            else vasScore.className = "text-4xl font-bold text-red-500";
        });


        // --- 3. Chart Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initEtiologyChart();
            initTreatmentChart();
        });

        function initEtiologyChart() {
            const ctx = document.getElementById('etiologyChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Recesi√≥n Gingival', 'Erosi√≥n √Åcida', 'Abrasi√≥n/Atrici√≥n', 'Otros'],
                    datasets: [{
                        data: [45, 30, 20, 5],
                        backgroundColor: [
                            '#0d9488', // teal-600
                            '#0ea5e9', // sky-500
                            '#fbbf24', // amber-400
                            '#cbd5e1'  // slate-300
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { usePointStyle: true, font: { size: 11 } }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.label}: ${context.raw}% de casos`;
                                }
                            }
                        }
                    }
                }
            });
        }

        let treatmentChart;

        function initTreatmentChart() {
            const ctx = document.getElementById('treatmentChart').getContext('2d');
            treatmentChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['D√≠a 0', 'D√≠a 7', 'D√≠a 14', 'D√≠a 30', 'Mes 3'],
                    datasets: [
                        {
                            label: 'Cuidado en Casa (Dent√≠fricos)',
                            data: [8, 7, 5, 3, 2], // Slow decline
                            borderColor: '#0ea5e9', // sky-500
                            backgroundColor: '#0ea5e9',
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6
                        },
                        {
                            label: 'Intervenci√≥n Cl√≠nica (Barniz)',
                            data: [8, 2, 2, 3, 4], // Immediate drop, slight rebound
                            borderColor: '#0d9488', // teal-600
                            backgroundColor: '#0d9488',
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            borderDash: [5, 5]
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10,
                            title: { display: true, text: 'Nivel de Dolor (EVA)' },
                            grid: { color: '#f1f5f9' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                footer: (tooltipItems) => {
                                    const index = tooltipItems[0].dataIndex;
                                    if(index === 1) return "Cl√≠nica: Alivio inmediato notable.";
                                    if(index === 3) return "Casa: Efecto acumulativo m√°ximo.";
                                    return "";
                                }
                            }
                        },
                        legend: {
                            position: 'top',
                            align: 'end',
                            labels: { boxWidth: 12, font: { size: 10 } }
                        }
                    }
                }
            });
        }

        // Optional: Highlight logic for the accordion to interact with the chart
        function highlightTreatment(type) {
            // Reset styles
            if (!treatmentChart) return;
            
            // Visual feedback on chart by dimming the other dataset
            const homeIndex = 0;
            const officeIndex = 1;

            if (type === 'home') {
                treatmentChart.data.datasets[homeIndex].borderColor = '#0ea5e9'; // Active
                treatmentChart.data.datasets[homeIndex].borderWidth = 3;
                treatmentChart.data.datasets[officeIndex].borderColor = '#e2e8f0'; // Dimmed
                treatmentChart.data.datasets[officeIndex].borderWidth = 1;
            } else if (type === 'office') {
                treatmentChart.data.datasets[officeIndex].borderColor = '#0d9488'; // Active
                treatmentChart.data.datasets[officeIndex].borderWidth = 3;
                treatmentChart.data.datasets[homeIndex].borderColor = '#e2e8f0'; // Dimmed
                treatmentChart.data.datasets[homeIndex].borderWidth = 1;
            }

            treatmentChart.update();
            
            // Reset after 3 seconds for UX
            setTimeout(() => {
                treatmentChart.data.datasets[homeIndex].borderColor = '#0ea5e9';
                treatmentChart.data.datasets[homeIndex].borderWidth = 2;
                treatmentChart.data.datasets[officeIndex].borderColor = '#0d9488';
                treatmentChart.data.datasets[officeIndex].borderWidth = 2;
                treatmentChart.update();
            }, 3000);
        }

    </script>
</body>
</html>
